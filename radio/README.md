# radikoとradiruの録音スクリプト（勝手に改造版）


## 変更履歴

2020/12/03 の仕様変更対応は
https://blog.bluedeer.net/archives/224
https://gist.github.com/matchy2/3956266
から

2016/10/11 の仕様変更対応は
[Radikoを録音するWSH](https://gist.github.com/booska/8861693)
から

オリジナルは
[zarigani/radikoru](https://github.com/zarigani/radikoru)


NHK はいつかの仕様変更から使えていない。
が、Radiko で聞けるようになったので当面はそっちで聞く


## rd_rec.sh
録音

時報から録音したい。既存の某製品のファイル名に合わせたい。
などの目的で一寸改造した。

思考&試行錯誤したした結果、以下の様になった

スクリプトの開始は 1 分前。59 分とかから。
認証で 5 秒程度かかる事を前提に少し待つ。
録音が終了したらファイル名を書き変える。日本語を含むファイル名に
なるので、安全のために録音コマンドに渡すファイル名は ascii にしておく。
ファイル名に含める時分は開始時刻にはできないので、コマンドラインから
指定する。

時間の指定は秒だけでは面倒なので 1h とか 2h30m とかから
変換するようにした。ただし簡易処理なので、表現的に正しくなくとも
受け付けてしまう。

配列を使うため、bash が外せなくなったので、どうせなら、と
関数宣言等のスタイルを書き変えた。

また、録音失敗時に時間内はリトライする様、ループにした


NHK に続いてサイマルラジオも追加。
ラジオ局は http://www.simulradio.info/ から採った。
ただし、殆んどは未テスト。

結局、mms な url を取り出せるものはそれを
取り出して明示する様にした。


オレ、明日からスタレビ録るんだ（フラグ）。
＊ 要さんは出ない


## rd_play.sh
再生用スクリプト。


## rd_inc.sh
共用部。
元が録音用なので、メッセージなんかに未修整が残ったりしているが、
後で直すかも。

必ず、上の 2 スクリプトと同じディレトクリに置く。


## rd_timefree.sh
タイムフリー用
とりあえず、東京リージョン専用


## genRadikoList.sh
ID と放送局一覧作成スクリプト
カレントディレクトリに area というディレクトリを作成する
